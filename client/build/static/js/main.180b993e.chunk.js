(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{131:function(e,t){},133:function(e,t){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),i=a.n(c),r=a(12),l=a(189),o=a(184),s=a(182),d=a(150),j=a(84),u=a(54),b=a.n(u),p=a(4),m=Object(n.createContext)(),x=Object(j.io)("https://video-chat-jp.herokuapp.com/"),O=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(r.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(""),s=Object(r.a)(o,2),d=s[0],j=s[1],u=Object(n.useState)({}),O=Object(r.a)(u,2),f=O[0],h=O[1],g=Object(n.useState)(!1),v=Object(r.a)(g,2),C=v[0],w=v[1],y=Object(n.useState)(!1),k=Object(r.a)(y,2),N=k[0],I=k[1],S=Object(n.useState)(""),R=Object(r.a)(S,2),A=R[0],B=R[1],D=Object(n.useRef)(),E=Object(n.useRef)(),V=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){l(e),D.current.srcObject=e})),x.on("me",(function(e){return j(e)})),x.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;h({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(p.jsx)(m.Provider,{value:{call:f,callAccepted:C,myVideo:D,userVideo:E,connectionRef:V,stream:i,name:A,callEnded:N,me:d,setName:B,callUser:function(e){var t=new b.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){x.emit("calluser",{userToCall:e,signalData:t,from:d,name:A})})),t.on("stream",(function(e){E.current.srcObject=e})),x.on("callaccepted",(function(e){w(!0),t.signal(e)})),V.current=t},leaveCall:function(){I(!0),V.current&&V.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new b.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){x.emit("answercall",{signal:e,to:f.from})})),e.on("stream",(function(e){E.current.srcObject=e})),e.signal(f.signal),V.current=e}},children:t})},f=a(19),h=a(179),g=Object(h.a)((function(e){return{video:Object(f.a)({width:"550px"},e.breakpoints.down("xs"),{width:"320px",padding:"0px 5px"}),gridContainer:Object(f.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),v=function(){var e=Object(n.useContext)(m),t=e.name,a=e.callAccepted,c=e.myVideo,i=e.userVideo,r=e.callEnded,l=e.stream,j=e.call,u=g();return Object(p.jsxs)(s.a,{container:!0,className:u.gridContainer,children:[l&&Object(p.jsx)(d.a,{className:u.paper,children:Object(p.jsxs)(s.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(p.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video})]})}),a&&!r&&Object(p.jsx)(d.a,{className:u.paper,children:Object(p.jsxs)(s.a,{item:!0,xs:12,md:6,children:[Object(p.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:j.name||"Name"}),Object(p.jsx)("video",{playsInline:!0,ref:i,autoPlay:!0,className:u.video})]})})]})},C=a(185),w=a(190),y=a(191),k=a(90),N=a(186),I=a(187),S=a(188),R=Object(h.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(f.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(f.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:10},statusBar:Object(f.a)({padding:10,marginRight:200},e.breakpoints.down("xs"),{marginRight:40}),paper:{padding:"10px 20px",border:"2px solid black"},span:Object(f.a)({fontWeight:"bold",fontSize:"12px",padding:"10px"},e.breakpoints.down("xs"),{fontSize:"small",padding:"5px 15px"}),call:{marginTop:20,background:"green"}}})),A=function(e){var t=e.children,a=e.idr,c=Object(n.useContext)(m),i=c.me,l=c.name,j=c.setName,u=c.leaveCall,b=c.callUser,x=c.call,O=c.callAccepted,f=Object(n.useState)(""),h=Object(r.a)(f,2),g=h[0],v=h[1],A=R(),B=Object(n.useState)(!1),D=Object(r.a)(B,2),E=D[0],V=D[1],z=Object(n.useState)(a),L=Object(r.a)(z,2),W=L[0],U=L[1];W&&(v(a),U(a));var T="mailto:?subject=Video-Chat ID&body=Hi, %0d%0a%09 \n    ".concat(l||"Anonymous",", Would like to Video-Chat! \n    %0d%0a%0d%0aClick on the Link Below then press CALL in the App\n    %0d%0a%0d%0a%0d%0a jpAIsys-Application: %0d%0a ").concat("https://chat-video-jp.netlify.app","/?id=").concat(i);return Object(p.jsx)(C.a,{className:A.container,children:Object(p.jsxs)(d.a,{elevation:10,className:A.paper,children:[Object(p.jsx)("form",{className:A.root,noValidate:!0,autoComplete:"off",children:Object(p.jsxs)(s.a,{container:!0,className:A.gridContainer,children:[Object(p.jsx)(o.a,{className:A.statusBar,variant:"h6",gutterBottom:!0,children:Object(p.jsx)("span",{className:A.span,style:i?{background:"green",color:"white"}:{background:"red",color:"white"},children:i?"** ONLINE **":"** OFFLINE **"})}),Object(p.jsxs)(s.a,{item:!0,xs:12,md:6,className:A.padding,children:[Object(p.jsx)(o.a,{variant:"h6",gutterBottom:!0,children:"Account Info"}),Object(p.jsx)(w.a,{label:"name",value:l,onChange:function(e){return j(e.target.value)},fullWidth:!0}),Object(p.jsx)(k.CopyToClipboard,{text:i,className:A.margin,children:Object(p.jsx)(y.a,{target:"_blank",href:T,variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(p.jsx)(N.a,{fontSize:"large"}),children:"Email Your ID"})})]}),Object(p.jsxs)(s.a,{item:!0,xs:12,md:6,className:A.padding,children:[Object(p.jsx)(o.a,{variant:"h6",gutterBottom:!0,children:"Make a call"}),Object(p.jsx)(w.a,{label:a||"ID to Call",value:g,onChange:function(e){return v(e.target.value)},fullWidth:!0}),x.isReceivedCall||O||E?Object(p.jsx)(y.a,{variant:"contained",color:"secondary",fontSize:"large",startIcon:Object(p.jsx)(I.a,{fullsize:"large"}),fullWidth:!0,onClick:u,className:A.margin,children:"Hang Up"}):Object(p.jsx)(y.a,{variant:"contained",color:"primary",fontSize:"large",startIcon:Object(p.jsx)(S.a,{fullsize:"large"}),fullWidth:!0,onClick:function(){return b(a&&!g?a:g),void V(!E)},className:A.call,children:"Call"})]})]})}),t]})})},B=function(){var e=Object(n.useContext)(m),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(p.jsx)(p.Fragment,{children:a.isReceivedCall&&!c&&Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(p.jsxs)("h1",{children:[a.name," is calling:  "]}),Object(p.jsx)(y.a,{style:{marginLeft:10,background:"green"},variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},D=Object(h.a)((function(e){return{appBar:Object(f.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%",margin:"10px"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}}));var E=function(){var e=D(),t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){return i(function(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(decodeURIComponent(n[0])===e)return decodeURIComponent(n[1])}console.log("Query variable %s not found",e)}("id")),function(){console.log("End")}}),[]),"undefined"===c&&i("No"),Object(p.jsxs)("div",{className:e.wrapper,children:[Object(p.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(p.jsx)(o.a,{variant:"h3",align:"center",children:"Video Chat"})}),Object(p.jsx)(v,{}),Object(p.jsx)(A,{idr:c,children:Object(p.jsx)(B,{})})]})};a(148);i.a.render(Object(p.jsx)(O,{children:Object(p.jsx)(E,{})}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.180b993e.chunk.js.map